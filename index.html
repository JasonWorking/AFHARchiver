<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="AFHARchiver : An AFNetworking extension to automatically generate HTTP Archive files of all of your network requests!" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>AFHARchiver</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mutualmobile/AFHARchiver">View on GitHub</a>

          <h1 id="project_title">AFHARchiver</h1>
          <h2 id="project_tagline">An AFNetworking extension to automatically generate HTTP Archive files of all of your network requests!</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mutualmobile/AFHARchiver/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mutualmobile/AFHARchiver/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>AFHARchiver</h1>

<p>An <a href="https://github.com/AFNetworking/AFNetworking/">AFNetworking</a> extension to automatically generate a HTTP Archive file of all of your network requests!</p>

<h2>Overview</h2>

<p>What is HTTP Archiving (HAR)? It's a specification that allows you to store HTTP request/responses as well as meta data, and view that information at a later time to help with debugging.</p>

<p>You can find the HAR specification <a href="http://www.softwareishard.com/blog/har-12-spec/">here</a>, and you can find an online HAR viewer <a href="http://www.softwareishard.com/har/viewer/">here</a>. There is also a long list of tools that support the HAR format <a href="http://www.softwareishard.com/blog/har-adopters/">here</a>.</p>

<p>The full spec has not been fully implemented yet, but basic timing information has been included. By releasing this to the community, we are hopeful more advanced logging data will be implemented.</p>

<h2>How to use the HARchiver</h2>

<p>Using a HARchiver is as simple as creating an instance of it, and telling it to start. The archiver will archive requests as they come in directly to disk at the path you specify.</p>

<div class="highlight"><pre>    <span class="n">self</span><span class="p">.</span><span class="n">afArchiver</span> <span class="o">=</span> <span class="p">[[</span><span class="n">AFHARchiver</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithPath:</span><span class="n">path</span> <span class="nl">error:</span><span class="nb">nil</span><span class="p">];</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">afArchiver</span> <span class="n">startArchiving</span><span class="p">];</span>
</pre></div>

<h2>Archiving Specific Requests</h2>

<p>You will most likely run into a scenerio where you only want to archive specific requests. The most common use has been to ignore logging image files to prevent your archive from growing too large in size. You can use <tt>setShouldArchiveOperationBlock:</tt> to provide custom archiving behavior.</p>

<div class="highlight"><pre>    <span class="p">[</span><span class="n">afArchvier</span> <span class="nl">setShouldArchiveOperationBlock:</span><span class="o">^</span><span class="kt">BOOL</span><span class="p">(</span><span class="n">AFHTTPRequestOperation</span> <span class="o">*</span><span class="n">operation</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="p">([</span><span class="n">operation</span> <span class="nl">isKindOfClass:</span><span class="p">[</span><span class="n">AFImageRequestOperation</span> <span class="n">class</span><span class="p">]]);</span>
    <span class="p">}];</span>
</pre></div>

<h2>A Few TODO's</h2>

<p>There is some advanced functionality that has not yet been implemented that will lead to more advanced logs. These include the following:</p>

<ul>
<li>Split the <strong>duration</strong> of the request into the proper time buckets. Currently all time is passed to the duration bucket.</li>
<li>Determine if responses are returning from a local cache using the <strong>cache</strong> property.</li>
<li>Log all cookie information to the <strong>cookie</strong> property.</li>
<li>Include redirect information in the <strong>redirectURL</strong> property.</li>
<li>Calculate the correct <strong>headerSize</strong>.</li>
</ul><h2>Contact</h2>

<p>Follow Mutual Mobile on Twitter (<a href="https://twitter.com/MutualMobile">@MutualMobile</a>)</p>

<h3>Creator</h3>

<p><a href="http://github.com/kcharwood">Kevin Harwood</a><br><a href="https://twitter.com/kevinharwood">@kevinharwood</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">AFHARchiver maintained by <a href="https://github.com/mutualmobile">mutualmobile</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
